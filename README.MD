# youtube-clone

## global Router

/ -> Home

/join -> Join

/login -> Login

/search -> Search Video

/setting -> Setting

## video Router

/videos/upload -> Upload Video

/videos/:id/watch -> watch Video (+comments, likes)

/videos/:id/edit -> VEdit ideo

/videos/:id/delete -> Delete Video

## user Router

/users/:id -> SEE User (my videos, my comments(USER ONLY), my like(USER ONLY), my info)

/users/logout -> logout User logout

/users/edit -> Edit User

/users/delete -> Delete User

# ğŸ“Â YouTube clone

### git repository ë§Œë“¤ê¸°

`$ git init`

`$ git remote add origin [git repository address]`

### package.json ë§Œë“¤ê¸°

`$ npm init`

### express ì„¤ì¹˜

`$ npm install express`

### ëª¨ë“ˆ ìë™ ì„¤ì¹˜

`$ npm install`

### babel ì„¤ì¹˜

For node https://babeljs.io/setup#installation

For nodemon https://babeljs.io/setup#installation

### nodemon ì„¤ì¹˜

`$ npm install nodemon --save-dev`

```purescript
"scripts": {
    "dev": "nodemon --exec babel-node index.js"
}
```

### express ì‚¬ìš©í•˜ê¸°

https://expressjs.com/en/starter/hello-world.html

### morgan ì„¤ì¹˜

`$ npm i morgan`

### routers & controllers ì‚¬ìš©í•˜ê¸°

https://expressjs.com/en/guide/routing.html#express-router

_`export_ const controller=()=>{}`í• ë•ŒëŠ”`import {controller} from "..."` **{}** ë¥¼ ê¼­ ì¨ì•¼ê² ë‹¤.

### RegEx ì‚¬ìš©í•˜ê¸°

```purescript
\d+
hyunseo\w+
```

### pug ì„¤ì¹˜

`$ npm i pug`

```purescript
app.set("view engine", "pug");
app.set("views", process.cwd() + "/src/views");
```

### express ì—ì„œ form ë‹¤ë£¨ê¸°

`app.use(express.urlencoded({ extended: true })`

ê·¸ë¦¬ê³  input ì— nameê¼­ ì ì–´ë¼!!!

### Mongo ì„¸íŒ…

mongoose ë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— mongoDBê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼í•œë‹¤.

`$ mongod`

`$ mongosh` mongo shell ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ í•´ì£¼ëŠ” ë§

### mongoose ì„¤ì¹˜

`npm install mongoose`

### ë‚´ DBê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” url ì°¾ê¸°

```purescript
Connecting to: mongodb://xxx.x.x.x:xxxxx/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+1.10.0
```

### mongoDBì— ìƒˆë¡œìš´ databaseë¥¼ ë§Œë“œëŠ” ë°©ë²•

serverì—ì„œ dbíŒŒì¼ ê·¸ ìì²´ë¥¼ import í•´ì„œ mongoì— ì—°ê²°í•´ì•¼í•œë‹¤.

https://mongoosejs.com/docs/connections.html

### Model ë§Œë“¤ê¸°

https://mongoosejs.com/docs/api/schema.html

https://mongoosejs.com/docs/api/model.html

### server.js ì— ëª½ë•… ë„£ì§€ ë§ê³  init.js(ì´ˆê¸°í™”)ë¥¼ ë§Œë“¤ì–´ì„œ ì„¸ë¶„í™”í•˜ì.

> server.js: expressì™€ serverì˜ configuration(í™˜ê²½ ì„¤ì •)ì— ê´€í•œ ì½”ë“œë§Œ ì²˜ë¦¬
>
> init.js: í•„ìš”í•œ ê²ƒì„ importì‹œí‚¤ëŠ” ë‹´ë‹¹, appì‹¤í–‰

### Model ì‚¬ìš©í•˜ê¸°

https://mongoosejs.com/docs/queries.html

### DBë¥¼ ë§Œë“¤ë•Œ Validation Error ìƒê°í•˜ë©´ì„œ model.create()í•˜ê¸°

ë°±ì—”ë“œì—ì„œ ì¼ë¶€ëŸ¬ ê°’ì„ ì¡°ì •í•˜ë©´ì„œê¹Œì§€ ê²½ìš°ì˜ ìˆ˜ë¥¼ ìƒê°í•´ì•¼í•œë‹¤.

### Middleware

https://mongoosejs.com/docs/middleware.html#pre

https://mongoosejs.com/docs/middleware.html#notes

[https://mongoosejs.com/docs/api/schema.html#Schema.prototype.static()](<https://mongoosejs.com/docs/api/schema.html#Schema.prototype.static()>)

### regex

https://www.mongodb.com/docs/manual/reference/operator/query/regex/
https://www.mongodb.com/docs/manual/reference/operator/query/or/

### bcrypt ë¡œ PW ì•”í˜¸í™”í•˜ê¸°

https://github.com/kelektiv/node.bcrypt.js#readme

`$ npm install bcrypt`

### \***\*Status Codes\*\***

https://developer.mozilla.org/ko/docs/Web/HTTP/Status

### middleware \***\*Sessionsë¡œ\*\*** expressì—ì„œ sessionì„ ì²˜ë¦¬í•˜ê¸°

https://github.com/expressjs/session#readme

`$ npm install express-session`

### req.session ìœ¼ë¡œ sessionì— ì •ë³´ ì¶”ê°€í•˜ê¸°

https://github.com/expressjs/session#reqsession

### res.locals ìœ¼ë¡œ ëª¨ë“  templateì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ variables ë§Œë“¤ê³  ì‚¬ìš©í•˜ê¸°

https://expressjs.com/en/api.html#res.locals

### \***\*connect-mongoë¡œ\*\*** ì„¸ì…˜ì„ MongoDBì— ì €ì¥í•˜ê¸°

https://github.com/jdesboeufs/connect-mongo#readme

`$ npm install connect-mongo`

### \***\*cookie\*\***

https://expressjs.com/en/api.html#res.cookie

COOKIE_SECRETì— ë„£ì„ ëœë¤ ë¬¸ìì—´ ìƒì„± ì‚¬ì´íŠ¸ https://randomkeygen.com/

### dotenvë¡œ .envíŒŒì¼ì„ ì½ê³  ë³€ìˆ˜ë¥¼ process.envì•ˆì— ë„£ê¸°

https://github.com/motdotla/dotenv#readme

`$ npm install dotenv --save`

### Google \***\*OAuth2.0\*\***

> [ì°¸ê³  ë¸”ë¡œê·¸]
>
> [https://velog.io/@tkdfo93/êµ¬ê¸€-OAuth2.0-Final-Project](https://velog.io/@tkdfo93/%EA%B5%AC%EA%B8%80-OAuth2.0-Final-Project)
>
> [https://velog.io/@mainfn/Node.js-expressë¡œ-êµ¬ê¸€-OAuth-íšŒì›ê°€ì…ë¡œê·¸ì¸-êµ¬í˜„](https://velog.io/@mainfn/Node.js-express%EB%A1%9C-%EA%B5%AC%EA%B8%80-OAuth-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B5%AC%ED%98%84)
>
> [https://velog.io/@young224/Google-OAuth-ê¸°ëŠ¥-êµ¬í˜„](https://velog.io/@young224/Google-OAuth-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84)

**êµ¬ê¸€ OAuth 2 ê³µì‹ë¬¸ì„œ**

https://developers.google.com/identity/protocols/oauth2?hl=ko

https://developers.google.com/identity/protocols/oauth2/web-server#httprest_2

**êµ¬ê¸€ í´ë¼ìš°ë“œ í”Œë«í¼**

https://console.cloud.google.com/apis/credentials?hl=ko&project=true-energy-400119&supportedpurview=project
